{% sw_extends '@Storefront/storefront/page/product-detail/tabs.html.twig' %}

{% block page_product_detail_tabs_inner %}
    <div class="card card-accordion">
        {% block page_product_detail_tabs_navigation %}
            <div class="card-header product-detail-tab-navigation flex-column">
                {% block page_product_detail_tabs_navigation_container %}
                    <ul class="nav nav-tabs product-detail-tab-navigation-list"
                        id="product-detail-accordion"
                        role="presentation">
                        
                        {% block page_product_detail_tabs_navigation_description %}
                            <li class="nav-item">
                                <a
                                    class="nav-link {% if (ratingSuccess != 1) and (ratingSuccess != -1) %}active{% endif %} product-detail-tab-navigation-link"
                                    id="description-tab"
                                    data-bs-toggle="collapse"
                                    data-bs-target="#description-collapse"
                                    role="button"
                                    aria-controls="description-collapse"
                                    aria-expanded="{% if (ratingSuccess != 1) and (ratingSuccess != -1) %}false{% else %}true{% endif %}"
                                >
                                    <span>{{ 'detail.tabsDescription'|trans|sw_sanitize }}</span>
                                    {# <span class="product-detail-tab-navigation-icon">
                                        {% sw_icon 'arrow-medium-right' style {pack:'solid'} %}
                                    </span> #}
                                    {% if page.product.translated.description|length > 0 %}
                                        <span class="product-detail-tab-preview d-none d-md-block">
                                            {{ page.product.translated.description|raw|striptags|sw_sanitize|u.truncate(125, 'â€¦') }}

                                            {% if page.product.translated.description|length >= 126 %}
                                                <span class="product-detail-tab-preview-more">{{ 'detail.tabsPreviewMore'|trans|sw_sanitize }}</span>
                                            {% endif %}
                                        </span>
                                    {% endif %}
                                </a>
                                {# Description Collapse Section #}
                                <div class="collapse"
                                    id="description-collapse"
                                    role="tabpanel"
                                    aria-labelledby="description-tab"
                                    data-bs-parent="#product-detail-accordion">
                                    <div class="accordion-body">
                                        {% sw_include '@Storefront/storefront/page/product-detail/description.html.twig' %}
                                        <div class="dk-product-downloads">
                                            {% block page_product_detail_tabs_downloads %}
                                                {% sw_include '@Storefront/storefront/component/product/downloads-tab-container.html.twig' with {
                                                    dowloadTabFiles: page.millCloudProductDownloads.elements,
                                                    product: page.product
                                                } %}
                                            {% endblock %}
                                        </div>
                                    </div>
                                </div>
                            </li>
                        {% endblock %}

                        {% block page_product_detail_tabs_navigation_review %}
                            {% if config('core.listing.showReview') %}
                                <li class="nav-item">
                                    <a
                                        class="nav-link {% if (ratingSuccess == 1) or (ratingSuccess == -1) %}active{% endif %} product-detail-tab-navigation-link"
                                        id="review-tab"
                                        data-bs-toggle="collapse"
                                        data-bs-target="#review-collapse"
                                        role="button"
                                        aria-controls="review-collapse"
                                        aria-expanded="{% if (ratingSuccess == 1) or (ratingSuccess == -1) %}true{% else %}false{% endif %}"
                                    >
                                        {{ 'detail.tabsReview'|trans|sw_sanitize }}
                                        {# <span class="product-detail-tab-navigation-icon">
                                            {% sw_icon 'arrow-medium-right' style {pack:'solid'} %}
                                        </span> #}
                                    </a>
                                    {% if config('core.listing.showReview') %}
                                        <div class="collapse"
                                            id="review-collapse"
                                            role="tabpanel"
                                            aria-labelledby="review-tab"
                                            data-bs-parent="#product-detail-accordion">
                                            <div class="accordion-body">
                                                {% sw_include '@Storefront/storefront/page/product-detail/review/review.html.twig' with {reviews: page.reviews} %}
                                            </div>
                                        </div>
                                    {% endif %}
                                </li>
                            {% endif %}
                        {% endblock %}
                    </ul>
                {% endblock %}
            </div>
        {% endblock %}

        {% block page_product_detail_tabs_content %}
            <div class="product-detail-tabs-content card-body">
                {% block page_product_detail_tabs_content_container %}
                    

                    {# Review Collapse Section #}
                    {% block page_product_detail_tabs_content_review %}
                        
                    {% endblock %}
                {% endblock %}
            </div>
        {% endblock %}
    </div>
{% endblock %}
