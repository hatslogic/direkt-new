"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["nimbits-tracking"],{1395:(e,t,n)=>{var i=n(6285);n(2615);function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(){s(this,"active",!0)}supports(e,t){return console.warn("[Nimbits Google Analytics Plugin] Method 'supports' was not overridden by `"+this.constructor.name+"`. Default return set to false."),!1}execute(){console.warn("[Nimbits Google Analytics Plugin] Method 'execute' was not overridden by `"+this.constructor.name+"`.")}disable(){this.active=!1}}class r extends o{execute(){const e=this.getEvents();window.PluginManager.getPluginInstances(this.getPluginName()).forEach((t=>{Object.keys(e).forEach((n=>{t.$emitter.subscribe(n,e[n])}))}))}getEvents(){console.warn("[Nimbits Google Analytics Plugin] Method 'getEvents' was not overridden by `"+this.constructor.name+"`.")}getPluginName(){console.warn("[Nimbits Google Analytics Plugin] Method 'getPluginName' was not overridden by `"+this.constructor.name+"`.")}}class a extends r{supports(){return!0}getPluginName(){return"AddToCart"}getEvents(){return{beforeFormSubmit:this._beforeFormSubmit.bind(this)}}_beforeFormSubmit(e){if(!this.active)return;const t=e.detail;let n=null;t.forEach(((e,t)=>{t.endsWith("[id]")&&(n=e)})),n?gtag("event","add_to_cart",{items:[{id:n,name:t.get("product-name"),quantity:t.get("lineItems["+n+"][quantity]")}]}):console.warn("[Nimbits Google Analytics Plugin] Product ID could not be fetched. Skipping.")}}var c=n(3206);class l extends o{supports(e,t){return"checkout"===e&&"cartpage"===t}execute(){const e=c.Z.querySelector(document,".cart-add-product",!1);e&&e.addEventListener("submit",this._formSubmit.bind(this))}_formSubmit(e){if(!this.active)return;const t=c.Z.querySelector(e.currentTarget,".form-control");gtag("event","add_to_cart",{items:[{id:t.value,quantity:1}]})}}class u{static getLineItems(){const e=c.Z.querySelector(document,".hidden-line-items-information"),t=c.Z.querySelectorAll(e,".hidden-line-item"),n=[];return t.forEach((t=>{n.push({id:c.Z.getDataAttribute(t,"id"),name:c.Z.getDataAttribute(t,"name"),quantity:c.Z.getDataAttribute(t,"quantity"),price:c.Z.getDataAttribute(t,"price"),currency:c.Z.getDataAttribute(e,"currency")})})),n}static getAdditionalProperties(){const e=c.Z.querySelector(document,".hidden-line-items-information");return{currency:c.Z.getDataAttribute(e,"currency"),shipping:c.Z.getDataAttribute(e,"shipping"),value:c.Z.getDataAttribute(e,"value"),tax:c.Z.getDataAttribute(e,"tax")}}}class h extends r{supports(){return!0}getEvents(){return{offCanvasOpened:this._offCanvasOpened.bind(this)}}getPluginName(){return"OffCanvasCart"}_offCanvasOpened(){c.Z.querySelector(document,".begin-checkout-btn").addEventListener("click",this._onBeginCheckout.bind(this))}_onBeginCheckout(){this.active&&gtag("event","begin_checkout",{items:u.getLineItems()})}}class d extends o{supports(e,t){return"checkout"===e&&"cartpage"===t}execute(){const e=c.Z.querySelector(document,".begin-checkout-btn",!1);e&&e.addEventListener("click",this._onBeginCheckout.bind(this))}_onBeginCheckout(){this.active&&gtag("event","begin_checkout",{items:u.getLineItems()})}}class f extends o{supports(e,t){return"checkout"===e&&"confirmpage"===t}execute(){this.active&&gtag("event","checkout_progress",{items:u.getLineItems()})}}class g extends r{supports(e,t){return"auth"===e&&"loginpage"===t||"register"===e&&"checkoutregisterpage"===t}getPluginName(){return"FormValidation"}getEvents(){return{beforeSubmit:this._onFormSubmit.bind(this)}}_onFormSubmit(e){if(!this.active)return;e.target.classList.contains("login-form")&&e.detail.validity&&gtag("event","login",{method:"mail"})}}class v extends o{supports(e,t){return"checkout"===e&&"finishpage"===t&&window.trackOrders}execute(){if(!this.active)return;const e=c.Z.querySelector(document,".finish-ordernumber");if(!e)return;const t=c.Z.getDataAttribute(e,"order-number");t?gtag("event","purchase",{transaction_id:t,items:u.getLineItems(),...u.getAdditionalProperties()}):console.warn("Cannot determine order number - Skip order tracking")}}class p extends o{supports(){return!0}execute(){document.addEventListener("click",this._onRemoveFromCart.bind(this))}_onRemoveFromCart(e){if(!this.active)return;const t=e.target.closest(".cart-item-remove-button");t&&gtag("event","remove_from_cart",{items:[{id:c.Z.getDataAttribute(t,"product-id")}]})}}class m extends r{supports(){return!0}getPluginName(){return"SearchWidget"}getEvents(){return{handleInputEvent:this._onSearch.bind(this)}}_onSearch(e){this.active&&gtag("event","search",{search_term:e.detail.value})}}class b extends r{supports(e,t){return"auth"===e&&"loginpage"===t||"register"===e&&"checkoutregisterpage"===t}getPluginName(){return"FormValidation"}getEvents(){return{beforeSubmit:this._onFormSubmit.bind(this)}}_onFormSubmit(e){if(!this.active)return;e.target.classList.contains("register-form")&&e.detail.validity&&gtag("event","sign_up",{method:"mail"})}}class C extends o{supports(e,t){return"product"===e&&"index"===t}execute(){if(!this.active)return;const e=c.Z.querySelector(document,'[itemtype="https://schema.org/Product"]',!1);if(!e)return void console.warn('[Nimbits Google Analytics Plugin] Product itemtype ([itemtype="https://schema.org/Product"]) could not be found in document.');const t=c.Z.querySelector(e,'meta[itemprop="productID"]',!1),n=c.Z.querySelector(e,'[itemprop="name"]',!1);if(!t||!n)return void console.warn('[NimbitsGoogle Analytics Plugin] Product ID (meta[itemprop="productID"]) or product name ([itemprop="name"]) could not be found within product scope.');const i=t.content,s=n.textContent.trim();i&&s?gtag("event","view_item",{items:[{id:i,name:s}]}):console.warn("[Nimbits Google Analytics Plugin] Product ID or product name is empty, do not track page view.")}}class k extends o{supports(){return!!c.Z.querySelector(document,".cms-element-product-listing-wrapper",!1)}execute(){this.active&&gtag("event","view_item_list",{items:this.getListItems()})}getListItems(){const e=c.Z.querySelectorAll(document,".product-box",!1),t=[];if(e)return e.forEach((e=>{const n=c.Z.querySelector(e,"input[name=product-id]").value,i=c.Z.querySelector(e,"input[name=product-name]").value;n&&i&&t.push({id:n,name:i})})),t}fetchProductId(e){let t=null;return e.forEach((e=>{c.Z.getAttribute(e,"name").endsWith("[id]")&&(t=e.value)})),t}}class _ extends o{supports(e,t){return"search"===e&&"search"===t}execute(){if(!this.active)return;const e=c.Z.querySelector(document,".header-search-input");gtag("event","view_search_results",{search_term:e.value})}}var y,E,S,A=n(7606),w=n(8553);class O extends i.Z{init(){this.cookieEnabledName=window.nbGA4CookieName+"_enabled",this.handleCookieChangeEvent(),window.useDefaultCookieConsent&&!A.Z.getItem(this.cookieEnabledName)||this.launchGA4()}launchGA4(){const e=document.createElement("script");e.src=window.nbGA4TrackingUrl,document.head.append(e),gtag("js",new Date),gtag("config",window.nbGA4TrackingId);const t=[...document.body.classList];this.controllerName=t.find((e=>0===e.indexOf("is-ctl-"))).replace("is-ctl-",""),this.actionName=t.find((e=>0===e.indexOf("is-act-"))).replace("is-act-",""),this.events=[],this.registerDefaultEvents(),this.handleEvents()}registerDefaultEvents(){this.registerEvent(a),this.registerEvent(l),this.registerEvent(h),this.registerEvent(d),this.registerEvent(f),this.registerEvent(g),this.registerEvent(v),this.registerEvent(p),this.registerEvent(m),this.registerEvent(b),this.registerEvent(C),this.registerEvent(k),this.registerEvent(_)}registerEvent(e){this.events.push(new e)}handleEvents(){this.events.forEach((e=>{e.supports(this.controllerName,this.actionName)&&e.execute()}))}handleCookieChangeEvent(){document.$emitter.subscribe(w.Du,this.handleCookies.bind(this))}handleCookies(e){const t=e.detail;Object.prototype.hasOwnProperty.call(t,this.cookieEnabledName)&&(t[this.cookieEnabledName]?this.startGoogleAnalytics():(this.removeCookies(),this.disableEvents()))}removeCookies(){const e=document.cookie.split(";"),t=/^(_swag_ga|_gat_gtag)/;e.forEach((e=>{const n=e.split("=")[0].trim();n.match(t)&&A.Z.removeItem(n)}))}disableEvents(){this.events.forEach((e=>{e.disable()}))}}y=O,S={},(E=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(E="options"))in y?Object.defineProperty(y,E,{value:S,enumerable:!0,configurable:!0,writable:!0}):y[E]=S;window.PluginManager.register("ga4",O)},8553:(e,t,n)=>{n.d(t,{Du:()=>l,UK:()=>u,ZP:()=>h});var i=n(6285),s=n(7606),o=n(2615),r=n(3637),a=n(8254),c=n(4690);const l="CookieConfiguration_Update",u="CookieConfiguration_CloseOffCanvas";class h extends i.Z{init(){this.lastState={active:[],inactive:[]},this._httpClient=new a.Z,this._registerEvents()}_registerEvents(){const{submitEvent:e,buttonOpenSelector:t,customLinkSelector:n,globalButtonAcceptAllSelector:i}=this.options;Array.from(document.querySelectorAll(t)).forEach((t=>{t.addEventListener(e,this.openOffCanvas.bind(this))})),Array.from(document.querySelectorAll(n)).forEach((t=>{t.addEventListener(e,this._handleCustomLink.bind(this))})),Array.from(document.querySelectorAll(i)).forEach((t=>{t.addEventListener(e,this._acceptAllCookiesFromCookieBar.bind(this))}))}_registerOffCanvasEvents(){const{submitEvent:e,buttonSubmitSelector:t,buttonAcceptAllSelector:n,wrapperToggleSelector:i}=this.options,o=this._getOffCanvas();if(o){const r=o.querySelector(t),a=o.querySelector(n),c=Array.from(o.querySelectorAll('input[type="checkbox"]')),l=Array.from(o.querySelectorAll(i));r&&r.addEventListener(e,this._handleSubmit.bind(this,s.Z)),a&&a.addEventListener(e,this._acceptAllCookiesFromOffCanvas.bind(this,s.Z)),c.forEach((t=>{t.addEventListener(e,this._handleCheckbox.bind(this))})),l.forEach((t=>{t.addEventListener(e,this._handleWrapperTrigger.bind(this))}))}}_handleCustomLink(e){e.preventDefault(),this.openOffCanvas()}_handleUpdateListener(e,t){const n=this._getUpdatedCookies(e,t);document.$emitter.publish(l,n)}_getUpdatedCookies(e,t){const{lastState:n}=this,i={};return e.forEach((e=>{n.inactive.includes(e)&&(i[e]=!0)})),t.forEach((e=>{n.active.includes(e)&&(i[e]=!1)})),i}openOffCanvas(e){const{offCanvasPosition:t}=this.options,n=window.router["frontend.cookie.offcanvas"];this._hideCookieBar(),o.Z.open(n,!1,this._onOffCanvasOpened.bind(this,e),t)}closeOffCanvas(e){o.Z.close(),"function"==typeof e&&e()}_onOffCanvasOpened(e){this._registerOffCanvasEvents(),this._setInitialState(),this._setInitialOffcanvasState(),PluginManager.initializePlugins(),"function"==typeof e&&e()}_hideCookieBar(){const e=PluginManager.getPluginInstances("CookiePermission");e&&e[0]&&(e[0]._hideCookieBar(),e[0]._removeBodyPadding())}_setInitialState(e=null){const t=e||this._getCookies("all"),n=[],i=[];t.forEach((({cookie:e,required:t})=>{s.Z.getItem(e)||t?n.push(e):i.push(e)})),this.lastState={active:n,inactive:i}}_setInitialOffcanvasState(){const e=this.lastState.active,t=this._getOffCanvas();e.forEach((e=>{const n=t.querySelector(`[data-cookie="${e}"]`);n.checked=!0,this._childCheckboxEvent(n)}))}_handleWrapperTrigger(e){e.preventDefault();const{entriesActiveClass:t,entriesClass:n,groupClass:i}=this.options,{target:s}=e,o=this._findParentEl(s,n,i);if(o){o.classList.contains(t)?o.classList.remove(t):o.classList.add(t)}}_handleCheckbox(e){const{parentInputClass:t}=this.options,{target:n}=e;(n.classList.contains(t)?this._parentCheckboxEvent:this._childCheckboxEvent).call(this,n)}_findParentEl(e,t,n=null){for(;e&&!e.classList.contains(n);){if(e.classList.contains(t))return e;e=e.parentElement}return null}_isChecked(e){return!!e.checked}_parentCheckboxEvent(e){const{groupClass:t}=this.options,n=this._isChecked(e),i=this._findParentEl(e,t);this._toggleWholeGroup(n,i)}_childCheckboxEvent(e){const{groupClass:t}=this.options,n=this._isChecked(e),i=this._findParentEl(e,t);this._toggleParentCheckbox(n,i)}_toggleWholeGroup(e,t){Array.from(t.querySelectorAll("input")).forEach((t=>{t.checked=e}))}_toggleParentCheckbox(e,t){const{parentInputSelector:n}=this.options,i=Array.from(t.querySelectorAll(`input:not(${n})`)),s=Array.from(t.querySelectorAll(`input:not(${n}):checked`));if(i.length>0){const e=t.querySelector(n);if(e){const t=s.length>0,n=t&&s.length!==i.length;e.checked=t,e.indeterminate=n}}}_handleSubmit(){const e=this._getCookies("active"),t=this._getCookies("inactive"),{cookiePreference:n}=this.options,i=[],o=[];t.forEach((({cookie:e})=>{o.push(e),s.Z.getItem(e)&&s.Z.removeItem(e)})),e.forEach((({cookie:e,value:t,expiration:n})=>{i.push(e),e&&t&&s.Z.setItem(e,t,n)})),s.Z.setItem(n,"1","30"),this._handleUpdateListener(i,o),this.closeOffCanvas(document.$emitter.publish(u))}acceptAllCookies(e=!1){if(!e)return this._handleAcceptAll(),void this.closeOffCanvas();c.Z.create(this.el);const t=window.router["frontend.cookie.offcanvas"];this._httpClient.get(t,(e=>{const t=(new DOMParser).parseFromString(e,"text/html");this._handleAcceptAll(t),c.Z.remove(this.el),this._hideCookieBar()}))}_acceptAllCookiesFromCookieBar(){return this.acceptAllCookies(!0)}_acceptAllCookiesFromOffCanvas(){return this.acceptAllCookies()}_handleAcceptAll(e=null){const t=this._getCookies("all",e);this._setInitialState(t);const{cookiePreference:n}=this.options;t.forEach((({cookie:e,value:t,expiration:n})=>{e&&t&&s.Z.setItem(e,t,n)})),s.Z.setItem(n,"1","30"),this._handleUpdateListener(t.map((({cookie:e})=>e)),[])}_getCookies(e="all",t=null){const{cookieSelector:n}=this.options;return t||(t=this._getOffCanvas()),Array.from(t.querySelectorAll(n)).filter((t=>{switch(e){case"all":return!0;case"active":return this._isChecked(t);case"inactive":return!this._isChecked(t);default:return!1}})).map((e=>{const{cookie:t,cookieValue:n,cookieExpiration:i,cookieRequired:s}=e.dataset;return{cookie:t,value:n,expiration:i,required:s}}))}_getOffCanvas(){const e=r.Z?r.Z.getOffCanvas():[];return!!(e&&e.length>0)&&e[0]}}var d,f,g;d=h,f="options",g={offCanvasPosition:"left",submitEvent:"click",cookiePreference:"cookie-preference",cookieSelector:"[data-cookie]",buttonOpenSelector:".js-cookie-configuration-button button",buttonSubmitSelector:".js-offcanvas-cookie-submit",buttonAcceptAllSelector:".js-offcanvas-cookie-accept-all",globalButtonAcceptAllSelector:".js-cookie-accept-all-button",wrapperToggleSelector:".offcanvas-cookie-entries span",parentInputSelector:".offcanvas-cookie-parent-input",customLinkSelector:`[href="${window.router["frontend.cookie.offcanvas"]}"]`,entriesActiveClass:"offcanvas-cookie-entries--active",entriesClass:"offcanvas-cookie-entries",groupClass:"offcanvas-cookie-group",parentInputClass:"offcanvas-cookie-parent-input"},(f=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(f))in d?Object.defineProperty(d,f,{value:g,enumerable:!0,configurable:!0,writable:!0}):d[f]=g},2615:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(3637),s=n(8254),o=n(7906);let r=null;class a extends i.Z{static open(e=!1,t=!1,n=null,s="left",o=!0,r=i.Z.REMOVE_OFF_CANVAS_DELAY(),a=!1,c=""){if(!e)throw new Error("A url must be given!");i.r._removeExistingOffCanvas();const l=i.r._createOffCanvas(s,a,c,o);this.setContent(e,t,n,o,r),i.r._openOffcanvas(l)}static setContent(e,t,n,i,c){const l=new s.Z;super.setContent(`<div class="offcanvas-body">${o.Z.getTemplate()}</div>`,i,c),r&&r.abort();const u=e=>{super.setContent(e,i,c),"function"==typeof n&&n(e)};r=t?l.post(e,t,a.executeCallback.bind(this,u)):l.get(e,a.executeCallback.bind(this,u))}static executeCallback(e,t){"function"==typeof e&&e(t),window.PluginManager.initializePlugins()}}},3637:(e,t,n)=>{n.d(t,{Z:()=>u,r:()=>l});var i=n(9658),s=n(2005),o=n(1966);const r="offcanvas",a=350;class c{constructor(){this.$emitter=new s.Z}open(e,t,n,i,s,o,r){this._removeExistingOffCanvas();const a=this._createOffCanvas(n,o,r,i);this.setContent(e,i,s),this._openOffcanvas(a,t)}setContent(e,t,n){const i=this.getOffCanvas();i[0]&&(i[0].innerHTML=e,this._registerEvents(n))}setAdditionalClassName(e){this.getOffCanvas()[0].classList.add(e)}getOffCanvas(){return document.querySelectorAll(`.${r}`)}close(e){const t=this.getOffCanvas();o.Z.iterate(t,(e=>{bootstrap.Offcanvas.getInstance(e).hide()})),setTimeout((()=>{this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:t})}),e)}goBackInHistory(){window.history.back()}exists(){return this.getOffCanvas().length>0}_openOffcanvas(e,t){c.bsOffcanvas.show(),window.history.pushState("offcanvas-open",""),"function"==typeof t&&t()}_registerEvents(e){const t=i.Z.isTouchDevice()?"touchend":"click",n=this.getOffCanvas();o.Z.iterate(n,(t=>{const i=()=>{setTimeout((()=>{t.remove(),this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:n})}),e),t.removeEventListener("hide.bs.offcanvas",i)};t.addEventListener("hide.bs.offcanvas",i)})),window.addEventListener("popstate",this.close.bind(this,e),{once:!0});const s=document.querySelectorAll(".js-offcanvas-close");o.Z.iterate(s,(n=>n.addEventListener(t,this.close.bind(this,e))))}_removeExistingOffCanvas(){c.bsOffcanvas=null;const e=this.getOffCanvas();return o.Z.iterate(e,(e=>e.remove()))}_getPositionClass(e){return"left"===e?"offcanvas-start":"right"===e?"offcanvas-end":`offcanvas-${e}`}_createOffCanvas(e,t,n,i){const s=document.createElement("div");if(s.classList.add(r),s.classList.add(this._getPositionClass(e)),!0===t&&s.classList.add("is-fullwidth"),n){const e=typeof n;if("string"===e)s.classList.add(n);else{if(!Array.isArray(n))throw new Error(`The type "${e}" is not supported. Please pass an array or a string.`);n.forEach((e=>{s.classList.add(e)}))}}return document.body.appendChild(s),c.bsOffcanvas=new bootstrap.Offcanvas(s,{backdrop:!1!==i||"static"}),s}}const l=Object.freeze(new c);class u{static open(e,t=null,n="left",i=!0,s=350,o=!1,r=""){l.open(e,t,n,i,s,o,r)}static setContent(e,t=!0,n=350){l.setContent(e,t,n)}static setAdditionalClassName(e){l.setAdditionalClassName(e)}static close(e=350){l.close(e)}static exists(){return l.exists()}static getOffCanvas(){return l.getOffCanvas()}static REMOVE_OFF_CANVAS_DELAY(){return a}}}},e=>{e.O(0,["vendor-node","vendor-shared"],(()=>{return t=1395,e(e.s=t);var t}));e.O()}]);