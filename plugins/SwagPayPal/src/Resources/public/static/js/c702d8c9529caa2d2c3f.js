(window["webpackJsonpPluginswag-pay-pal"]=window["webpackJsonpPluginswag-pay-pal"]||[]).push([[2450],{2085:function(){},2450:function(t,s,a){"use strict";a.r(s),a.d(s,{default:function(){return o}}),a(5637);let e="missing",n="invalid";var o=Shopware.Component.wrapComponentConfig({template:'<sw-card\n    class="swag-paypal-settings-webhook"\n    position-identifier="swag-paypal-settings-webhook"\n    :is-loading="status !== \'none\'"\n>\n    <template #title>\n        <span class="sw-card__title">\n            {{ $t(\'swag-paypal-settings.webhook.title\') }}\n        </span>\n\n        <sw-label\n            class="swag-paypal-settings-webhook__label"\n            appearance="pill"\n            size="medium"\n            :variant="webhookStatusVariant"\n        >\n            <sw-color-badge :rounded="true" :variant="webhookStatusVariant" />\n            <span>{{ webhookStatusLabel }}</span>\n        </sw-label>\n    </template>\n\n    <span class="swag-paypal-settings-webhook__info-text">\n        {{ $t(\'swag-paypal-settings.webhook.info\') }}\n    </span>\n\n    <sw-button\n        class="swag-paypal-settings-webhook__refresh-button"\n        variant=""\n        :disabled="status !== \'none\' || !allowRefresh || !acl.can(\'swag_paypal.editor\')"\n        :is-loading="isRefreshing"\n        @click="onRefreshWebhook"\n    >\n        {{ $t(\'swag-paypal-settings.webhook.buttonRefresh\') }}\n    </sw-button>\n</sw-card>\n',compatConfig:Shopware.compatConfig,inject:["acl","SwagPayPalWebhookService"],mixins:[Shopware.Mixin.getByName("swag-paypal-notification")],data(){return{allWebhookStatus:{},status:"none"}},computed:{settingsStore(){return Shopware.Store.get("swagPayPalSettings")},webhookStatus(){return this.allWebhookStatus[String(this.settingsStore.salesChannel)]},webhookStatusLabel(){return this.$t(`swag-paypal-settings.webhook.status.${this.webhookStatus||"unknown"}`)},webhookStatusVariant(){switch(this.webhookStatus){case e:return"danger";case n:return"warning";case"valid":return"success";default:return"neutral"}},allowRefresh(){return[n,e].includes(this.webhookStatus??"")}},watch:{"settingsStore.salesChannel":{immediate:!0,handler(){this.fetchWebhookStatus(this.settingsStore.salesChannel)}}},methods:{fetchWebhookStatus(t){this.webhookStatus||(this.status="fetching",this.SwagPayPalWebhookService.status(t).then(s=>{this.allWebhookStatus[String(t)]=s.result,this.status="none"}).catch(t=>{this.createNotificationError({title:this.$t("swag-paypal.notifications.webhook.title"),message:this.$t("swag-paypal.notifications.webhook.errorMessage",{message:this.createMessageFromError(t)})})}))},async onRefreshWebhook(){this.status="refreshing",await this.SwagPayPalWebhookService.register(this.settingsStore.salesChannel).catch(t=>{this.createNotificationError({title:this.$t("swag-paypal.notifications.webhook.title"),message:this.$t("swag-paypal.notifications.webhook.errorMessage",{message:this.createMessageFromError(t)})})}),this.status="none",this.fetchWebhookStatus(this.settingsStore.salesChannel)}}})},5637:function(t,s,a){var e=a(2085);e.__esModule&&(e=e.default),"string"==typeof e&&(e=[[t.id,e,""]]),e.locals&&(t.exports=e.locals),a(5346).Z("d9b36b94",e,!0,{})}}]);